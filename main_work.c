#include<avr/io.h>
#include<avr/wdt.h>
#include <avr/interrupt.h>

static int daydream_cafe[94] = {
0xBD,0xB2,0x9E,0x8D,0x00,0x8D,0x00,0x8D,0x8D,0x9E,0x9E,0xB2,0xB2,0xBD,0xB2,0xD4,
0xEE,0xEE,0x9E,0,0xEE,0x9E,0x9E,0x8D,0x9E,0xB2,0xBD,
0xB2,0,0xB2,0xB2,0xB2,0xBD,0xBD,0x9E,0x85,
0xD4,0xBD,0xB2,0xBD,0xEE,0xB2,0xBD,0xEE,0x8D,0x9E,0x9E,
0xBD,0xB2,0x9E,0x8D,0x00,0x8D,0,0x8D,0x8D,0x9E,0x9E,0xB2,0xB2,0xBD,0xB2,0xD4,
0xEE,0xEE,0x9E,0x00,0xEE,0x9E,0x9E,0x8D,0x9E,0xB2,0xBD,
0xB2,0x00,0xB2,0xB2,0xB2,0xBD,0xBD,0x9E,0x85,
0xD4,0xBD,0xB2,0xBD,0xEE,0xB2,0xBD,0xEE,0x8D,0x9E,0x9E
};

int sound_cnt = 1;
int cnt = 0;
int call_sound = 0;

ISR(TIMER1_COMPA_vect){
    cnt++;
    if(cnt == 10){
        cnt = 0;
        sound_cnt++;
    }
    if(0 <= cnt && cnt <= 700){
        OCR2A = daydream_cafe[sound_cnt];
    }
    if(700 < cnt && cnt < 100){
        OCR2A = 0x00;
    }/*
    if(sound_cnt = 95){
        sound_cnt = 0;
    }*/
}

int main()
{
	DDRB = 0xFF;
	DDRC = 0x0F;
	DDRD = 0xFE;

	PORTB = 0xFF;
	PORTC = 0x00;
	PORTD = 0x00;

	TCCR2B = 0x04;
	TCCR2A = 0x12;
	OCR2A = 62;
	OCR2B = 0;

    TCNT1 = 0;
    TCCR1A = 2;
    TCCR1B = 4;
    OCR1A = 30;
    TIMSK1 |= _BV(OCIE1A);

    sei();

	for (;;) {
		wdt_reset();
	}
	return 0;
}
